\documentclass[11pt,a4paper,oneside]{book}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amssymb}
%\usepackage{amsmath}
%\usepackage{mathabx}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{bnf}
\newcommand{\lit}[1]{\mbox{`\texttt{#1}'}}
\newcommand{\ntm}[1]{<\mbox{#1}>}
\begin{document}

\begin{center}
\begin{Large}Домашние задания по курсу <<Математическая логика>>\end{Large}\\
ИТМО, группы 2536-2539, осень 2014 г.
\end{center}

Для всех программ кодировка выходных файлов должна быть либо CP1251,
либо UTF8. 

Задания 1-4 --- для всех групп. Задания 5 и 6 --- только для 2538 и 2539, причем
надо сделать только одно задание из двух.

\begin{enumerate}
\item[1] Написать программу, проверяющую доказательства в исчислении высказываний на 
корректность. Входной файл представляет из себя последовательность высказываний, по 
высказыванию на строку. Высказывания удовлетворяют приведенной ниже грамматике. 
\begin{bnf}\begin{eqnarray*}
\ntm{выражение} &::=& \ntm{дизъюнкция} | \ntm{дизъюнкция} \lit{->} \ntm{выражение}\\
\ntm{дизъюнкция} &::=& \ntm{конъюнкция} | \ntm{дизъюнкция} \lit{|} \ntm{конъюнкция}\\
\ntm{конъюнкция} &::=& \ntm{отрицание} | \ntm{конъюнкция} \lit{\&} \ntm{отрицание}\\
\ntm{отрицание} &::=& (\lit{A} \dots \lit{Z}) \{\lit{0}\dots\lit{9}\}^* | \lit{!} \ntm{отрицание} | \lit{(} \ntm{выражение} \lit{)}
\end{eqnarray*}\end{bnf}%

Пробелы в строке должны игнорироваться.
Результатом работы программы должен быть проаннотированный текст доказательства,
каждая строка должна соответствовать грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{строка} &::=& \lit{(} \ntm{номер} \lit{) } \ntm{выражение} \lit{ (} \ntm{аннотация} \lit{)}\\
\ntm{аннотация} &::=& \lit{Сх. акс. } \ntm{номер} \\
                &|& \lit{M.P. } \ntm{номер}\lit{, }\ntm{номер}\\
                &|& \lit{Не доказано}\\
\ntm{номер} &::=& (\lit{0}\dots\lit{9})^+
\end{eqnarray*}\end{bnf}%

Выражение не должно содержать пробелов, номер от выражения и выражение от аннотации должны
отделяться одним пробелом. Выражения в доказательстве должны нумероваться подряд
натуральными числами с 1. Если выражение $\gamma_n$ получено из 
$\gamma_i$ и $\gamma_j$, где $\gamma_j \equiv \gamma_i\rightarrow\gamma_n$
путем применения правила Modus Ponens, то аннотация должна выглядеть как 
\lit{M.P. $i$, $j$}, обратный порядок номеров не допускается.

Уделите внимание производительности: ваша программа должна проверять доказательство в 
5000 выражений (общим объемом $1$Мб) на Intel Core i5-2520M ($2.5$ GHz) за несколько секунд.

\item[2] Написать программу, преобразующую вывод $\Gamma, \alpha \vdash \beta$ в вывод
$\Gamma \vdash \alpha \rightarrow \beta$.
Первой строкой входного файла должна являться строка, перечисляющая гипотезы, использованные 
в выводе, и выводимое утверждение. На следующих строчках входного файла перечислены 
высказывания
исходного вывода. Высказывания удовлетворяют грамматике из предыдущего задания,
первая строка соответствует следующей грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{заголовок} &::=& \{\ntm{выражение} \lit{,}\}^* \ntm{выражение} \lit{|-} \ntm{выражение}
\end{eqnarray*}\end{bnf}%

Символ `\texttt{|}' имеет ASCII-код $124_{10}$.

Результатом работы программы должен быть текст, содержащий преобразованный вывод.
Формат выходного файла совпадает с форматом входного файла.
Вы можете предполагать что входной файл содержит корректный вывод требуемой формулы.

\item[3] Написать программу, строящую доказательство указанного во входном файле высказывания
(если оно общезначимо), либо дающую оценку пропозициональных переменных, на которых
высказывание ложно (если оно опровержимо).

Входной файл состоит из единственной строки, содержащей формулу исчисления высказываний, которую
требуется доказать или опровергнуть. Высказывание удовлетворяет грамматике из первого задания.
Выходной файл должен либо содержать доказательство высказывания (в формате доказательства из 
первого задания), либо содержать фразу, удовлетворяющую грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{строка} &::=& \lit{Высказывание ложно при } ~\ntm{назначение} \{\lit{,} \ntm{назначение} \}^*\\
\ntm{назначение} &::=& \ntm{переменная} \lit{=} (\lit{И}|\lit{Л})
\end{eqnarray*}\end{bnf}%
Например, при входной формуле \texttt{!A\&!B} результат (с точностью до порядка переменных
и конкретного контрпримера) должен выглядеть так:
\begin{verbatim}
Высказывание ложно при A=И, B=Л
\end{verbatim}

\item[4] Написать программу, проверяющую доказательство в формальной арифметике на кооректность,
а также преобразующую вывод $\Gamma, \alpha \vdash \beta$ в вывод 
$\Gamma \vdash \alpha \rightarrow \beta$

Грамматика входного файла:
\begin{bnf}\begin{eqnarray*}
\ntm{Файл} &::=& \ntm{заголовок} \lit{\textbackslash{}n} \ntm{доказательство}\\
\ntm{заголовок} &::=& \{\ntm{выражение}\lit{,}\}^* \ntm{выражение} \lit{|-} \ntm{выражение}\\
\ntm{доказательство} &::=& \{\ntm{выражение}\lit{\textbackslash{}n}\}^*\\
\ntm{выражение} &::=& \ntm{дизъюнкция} | \ntm{дизъюнкция} \lit{->} \ntm{выражение}\\
\ntm{дизъюнкция} &::=& \ntm{конъюнкция} | \ntm{дизъюнкция} \lit{|} \ntm{конъюнкция}\\
\ntm{конъюнкция} &::=& \ntm{унарное} | \ntm{конъюнкция} \lit{\&} \ntm{унарное}\\
\ntm{унарное} &::=& \ntm{предикат} | \lit{!} \ntm{унарное} | \lit{(} \ntm{выражение} \lit{)}\\
               &|& (\lit{@}|\lit{?}) \ntm{переменная} \ntm{унарное}\\
\ntm{переменная} &::=& (\lit{a} \dots \lit{z}) \{\lit{0}\dots\lit{9}\}^*\\
\ntm{предикат} &::=& (\lit{A} \dots \lit{Z}) \{\lit{0}\dots\lit{9}\}^* [ \lit{(} {\ntm{терм} \{ \lit{,} \ntm{терм} \}^*} \lit{)} ]\\
             &|& \ntm{терм} \lit{=} \ntm{терм}\\
\ntm{терм}   &::=& \ntm{слагаемое} | \ntm{терм} \lit{+} \ntm{слагаемое}\\
\ntm{слагаемое} &::=& \ntm{умножаемое} | \ntm{слагаемое} \lit{*} \ntm{умножаемое}\\
\ntm{умножаемое} &::=& (\lit{a} \dots \lit{z}) \{\lit{0}\dots\lit{9}\}^*  \lit{(} {\ntm{терм} \{ \lit{,} \ntm{терм} \}^*} \lit{)} \\
             &|& \ntm{переменная} | \lit{(} \ntm{терм} \lit{)}\\
             &|& \lit{0} | \ntm{умножаемое} \lit{'}
\end{eqnarray*}\end{bnf}%

Символ `\texttt{@}' обозначает квантор всеобщности, символ `\texttt{?}' --- квантор существования.
Грамматика не различает переменные и константы;
мы можем предполагать, что константы в формуле --- это свободные переменные.

Входной файл может содержать некорректный вывод --- а именно, некоторые переходы
в выводе могут быть корректными; входной файл по-прежнему синтаксически корректен.
В этом случае программа должна выдать текст
вида: 
\begin{verbatim}
Вывод некорректен начиная с формулы номер <№>[: <ошибка>]
\end{verbatim}
где вместо \texttt{<№>} подставлен номер первой некорректной формулы. Необязательное поле
\texttt{<ошибка>} должно появляться, если формула не является аксиомой или допущением,
не может быть выведена из предыдущих, но являлась бы (или могла бы быть выведена), 
если бы не нарушение ограничений на переменные. Возможные варианты ошибок:
\begin{verbatim}
терм <X> не свободен для подстановки в формулу <Y> вместо переменной <a>.

переменная <a> входит свободно в формулу <X>.

используется <правило|схема аксиом> с квантором по переменной <a>, 
входящей свободно в допущение <X>.
\end{verbatim}

Выходной файл --- либо измененное доказательство утверждения $\Gamma \vdash \alpha \rightarrow \beta$,
при этом вывод должен соответствовать грамматике для ввода, либо сообщение об ошибке.
Если в заголовке доказательства отсутствуют гипотезы, то требуется выдать исходное доказательство.

\item[5] Написать программу, по формуле интуиционистского исчисления высказываний строящую
опровергающий ее пример в топологической интерпретации интуиционистского исчисления высказываний
на ${\mathbb R}$. 

Входной файл - формула исчисления высказываний.
Выходной файл - множество вещественных чисел, задаваемое выражением в следующей грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{строка} &::=& \{\lit{(} \ntm{граница}, \ntm{граница} \lit{)}\}^+\\
\ntm{граница} &::=& [\lit{-}] ( \{\lit{0}\dots\lit{9}\}^+ | \lit{inf} )
\end{eqnarray*}\end{bnf}%

\item[6] Написать программу, по формуле исчисления предикатов $\alpha$ строящую формулу с поверхностными
кванторами $\beta$ вместе с доказательством $\alpha \vdash \beta$. Доказательство должно соответствовать
формату входных и выходных файлов для задачи 4.

%\item[6] Напишите интерпретатор рекурсивных функций, который по формуле и 

\end{enumerate}

\end{document}
